import { useEffect, useState } from "react"; import { Button } from "@/components/ui/button"; import { Card, CardContent } from "@/components/ui/card"; import { Input } from "@/components/ui/input"; import { motion } from "framer-motion";

export default function TournamentSite() { const [tournament, setTournament] = useState(null); const [acceptedRules, setAcceptedRules] = useState(false); const [showRegistration, setShowRegistration] = useState(false); const [phone, setPhone] = useState(""); const [standoffId, setStandoffId] = useState(""); const [step, setStep] = useState("intro"); const [teamMates, setTeamMates] = useState(["", "", "", "", ""]); const [teamName, setTeamName] = useState(""); const [paymentCode, setPaymentCode] = useState(""); const [teams, setTeams] = useState([]);

useEffect(() => { fetch("/data/tournaments/t3.txt") .then((res) => res.text()) .then((text) => { const [title, desc, image, players, datetime, prize, fee, videos, highlights] = text.split(";"); setTournament({ title, desc, image, players, datetime, prize, fee, videos: videos.split(","), highlights: highlights.split(",") }); }); }, []);

const handleParticipateClick = () => { setShowRegistration(true); };

const handleRegistrationSubmit = () => { if (!phone || !standoffId || !acceptedRules) return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∏ –ø—Ä–∏–º–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞"); setStep("team"); };

const handleTeamSubmit = () => { if (!teamName || teamMates.some((id) => !id)) return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤"); setStep("payment"); };

const handlePaymentSubmit = () => { if (!paymentCode) return alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –æ–ø–ª–∞—Ç—ã"); alert("–£—Å–ø–µ—à–Ω–æ! –í–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞."); setTeams([...teams, { name: teamName }]); setShowRegistration(false); };

return ( <div className="min-h-screen bg-gradient-to-b from-gray-900 to-black text-white font-sans"> <header className="text-center py-10"> <motion.h1 initial={{ opacity: 0, y: -50 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 1 }} className="text-5xl font-bold text-yellow-400" > üî• –¢—É—Ä–Ω–∏—Ä—ã Standoff 2 </motion.h1> </header>

{tournament && (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ delay: 0.5 }}
      className="max-w-4xl mx-auto p-4"
    >
      <Card className="bg-white/10 backdrop-blur rounded-2xl shadow-lg border border-yellow-500">
        <CardContent className="p-6">
          <h2 className="text-3xl font-semibold text-yellow-300 mb-2">{tournament.title}</h2>
          <p className="text-gray-300 mb-4">{tournament.desc}</p>
          <img src={tournament.image} alt="Tournament" className="rounded-lg mb-4" />
          <p className="text-gray-400">–ò–≥—Ä–æ–∫–æ–≤ –≤ –∫–æ–º–∞–Ω–¥–µ: {tournament.players}</p>
          <p className="text-gray-400">–î–∞—Ç–∞: {tournament.datetime}</p>
          <p className="text-gray-400">–ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥: {tournament.prize}</p>
          <p className="text-gray-400">–í–∑–Ω–æ—Å —Å –∏–≥—Ä–æ–∫–∞: {tournament.fee}</p>
          <Button onClick={handleParticipateClick} className="mt-4 bg-yellow-500 hover:bg-yellow-600">
            –£—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Ç—É—Ä–Ω–∏—Ä–µ
          </Button>
        </CardContent>
      </Card>

      <div className="mt-10">
        <h3 className="text-2xl mb-4">–£—á–∞—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã</h3>
        <ul className="space-y-2">
          {teams.map((t, idx) => (
            <li key={idx} className="text-yellow-300">{t.name}</li>
          ))}
        </ul>
      </div>

      <div className="mt-10">
        <h3 className="text-2xl mb-4">–Ø—Ä–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã</h3>
        <div className="grid grid-cols-2 gap-4">
          {tournament.highlights.map((vid, idx) => (
            <video key={idx} controls className="rounded-xl">
              <source src={`/videos/${vid}.mp4`} type="video/mp4" />
            </video>
          ))}
        </div>
      </div>

      <div className="mt-10">
        <h3 className="text-2xl mb-4">–ü–æ–ª–Ω—ã–µ –º–∞—Ç—á–∏</h3>
        <div className="grid grid-cols-2 gap-4">
          {tournament.videos.map((vid, idx) => (
            <video key={idx} controls className="rounded-xl">
              <source src={`/videos/${vid}.mp4`} type="video/mp4" />
            </video>
          ))}
        </div>
      </div>
    </motion.div>
  )}

  {showRegistration && (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      className="fixed inset-0 bg-black/80 backdrop-blur flex items-center justify-center z-50 p-4"
    >
      <Card className="w-full max-w-lg bg-white/10 border border-white/20 rounded-xl p-6 text-white">
        {step === "intro" && (
          <div>
            <h3 className="text-xl font-semibold mb-4">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
            <label className="block mb-2">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</label>
            <Input value={phone} onChange={(e) => setPhone(e.target.value)} className="mb-4" />
            <label className="block mb-2">ID –≤ Standoff 2:</label>
            <Input value={standoffId} onChange={(e) => setStandoffId(e.target.value)} className="mb-4" />
            <div className="flex items-center mb-4">
              <input
                type="checkbox"
                className="mr-2"
                checked={acceptedRules}
                onChange={(e) => setAcceptedRules(e.target.checked)}
              />
              <span>–Ø –ø—Ä–æ—á–∏—Ç–∞–ª –∏ –ø—Ä–∏–Ω–∏–º–∞—é –ø—Ä–∞–≤–∏–ª–∞</span>
            </div>
            <Button
              onClick={handleRegistrationSubmit}
              className="w-full bg-yellow-500 hover:bg-yellow-600"
            >
              –î–∞–ª–µ–µ
            </Button>
          </div>
        )}

        {step === "team" && (
          <div>
            <h3 className="text-xl font-semibold mb-4">–í–≤–µ–¥–∏—Ç–µ —Å–æ—Å—Ç–∞–≤ –∫–æ–º–∞–Ω–¥—ã</h3>
            <label className="block mb-2">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã:</label>
            <Input value={teamName} onChange={(e) => setTeamName(e.target.value)} className="mb-4" />
            {teamMates.map((id, idx) => (
              <Input
                key={idx}
                placeholder={`–ò–≥—Ä–æ–∫ ${idx + 1} ID`}
                value={id}
                onChange={(e) => {
                  const newTeam = [...teamMates];
                  newTeam[idx] = e.target.value;
                  setTeamMates(newTeam);
                }}
                className="mb-2"
              />
            ))}
            <Button onClick={handleTeamSubmit} className="w-full bg-yellow-500 hover:bg-yellow-600 mt-2">
              –î–∞–ª–µ–µ –∫ –æ–ø–ª–∞—Ç–µ
            </Button>
          </div>
        )}

        {step === "payment" && (
          <div>
            <h3 className="text-xl font-semibold mb-4">–û–ø–ª–∞—Ç–∞</h3>
            <p className="mb-4">–û–ø–ª–∞—Ç–∏—Ç–µ —É—á–∞—Å—Ç–∏–µ –∏ –≤–≤–µ–¥–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:</p>
            <Input value={paymentCode} onChange={(e) => setPaymentCode(e.target.value)} className="mb-4" />
            <Button onClick={handlePaymentSubmit} className="w-full bg-yellow-500 hover:bg-yellow-600">
              –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É
            </Button>
          </div>
        )}
      </Card>
    </motion.div>
  )}

  <footer className="text-center text-sm text-gray-500 mt-20 p-4">
    –í—Å–µ –≤–∏–¥–µ–æ ‚Äî –≤ <a href="https://t.me/yourchannel" className="text-yellow-400 underline">–Ω–∞—à–µ–º Telegram-–∫–∞–Ω–∞–ª–µ</a>
  </footer>
</div>

); }

